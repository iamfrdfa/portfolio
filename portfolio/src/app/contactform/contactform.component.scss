/* ===========================
   contactform.component.scss
   Responsives Kontaktformular mit
   Grid-Layout, skalierender Typo & Buttons.
   Breakpoints: 1200 / 980 / 768 / 560
   =========================== */
@use 'styles/variables' as *;
@use 'styles/mixins' as *;
@use "sass:meta";
@use "sass:color";

// ALT:
// $bg: if(global-variable-exists(primaryColorBG), $primaryColorBG, #222) !default;
// $fg: if(global-variable-exists(textColor), $textColor, #e8e8e8) !default;
// $accent: if(global-variable-exists(primaryColor), $primaryColor, #3dcfb6) !default;

// NEU:
$bg: if(meta.global-variable-exists('primaryColorBG'), $primaryColorBG, #222) !default;
$fg: if(meta.global-variable-exists('textColor'), $textColor, #e8e8e8) !default;
$accent: if(meta.global-variable-exists('primaryColor'), $primaryColor, #3dcfb6) !default;

$muted: #9aa0a6 !default;
$accent-soft: rgba(61, 207, 182, 0.55) !default;
$line: rgba(61, 207, 182, 0.45) !default;
$error: #ff5a5f !default;
$ok: #39d98a !default;

.contactWrapper {
    width: 100%;
    background: $secondaryColorBG !important;
}

.contact-container {
    /* Auf einheitliches Alignment-System umgestellt */
    width: min(var(--container-max), 100% - 2 * var(--gutter));
    margin: 0 auto;
    padding: clamp(24px, 4vw, 48px) 0;
    display: grid;
    grid-template-columns: 1.1fr 1fr;
    gap: clamp(24px, 4vw, 48px);
    color: $fg;
    font-family: 'Fira Code', sans-serif;
}

@media (max-width: 980px) {
    .contact-container { grid-template-columns: 1fr; }
}

/* LEFT */
.contact-left {
    display: grid;
    align-content: start;
    gap: clamp(12px, 2.5vw, 18px);

    .kicker {
        color: $accent;
        font-weight: 700;
        letter-spacing: .02em;
        margin: 0;
        font-size: clamp(12px, 1.5vw, 14px);
        text-transform: uppercase;
    }

    .display {
        font-family: 'Fira Code', monospace;
        font-size: clamp(32px, 7vw, 64px);
        line-height: .92;
        margin: 0 0 12px;
        font-weight: 800;
        color: $primaryColor;
    }

    .subhead {
        font-size: clamp(16px, 2.3vw, 28px);
        margin: 8px 0 0;
        font-weight: 800;
        color: $primaryColor;
    }

    .lead {
        color: $muted;
        margin: 4px 0 0;
        max-width: 58ch;
        font-size: clamp(14px, 1.8vw, 16px);
    }

    .cta-hint {
        margin-top: 12px;

        .accent-link {
            color: $accent;
            font-weight: 700;
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color .2s;
            &:hover { border-color: $accent; }
        }
    }
}

/* RIGHT */
.contact-right form {
    display: grid;
    gap: clamp(20px, 2.6vw, 28px);
}

/* Top-Separators */
.sep {
    padding-top: 22px;
    border-top: 2px solid $line;
}

/* Frage-Zeile */
.prompt {
    font-weight: 400;
    font-size: clamp(18px, 2.3vw, 28px);
    color: $accent;
    margin: 0 0 8px 0;
}

/* Inputs/Textareas */
.field {
    display: grid;
    gap: 10px;

    input, textarea {
        width: 100%;
        font: inherit;
        border: none;
        outline: none;
        background: transparent;
        color: $fg;
        padding: 0 0 8px 0;
        border-bottom: 1px solid transparent;
        font-size: clamp(14px, 1.8vw, 16px);

        &::placeholder { color: $muted; opacity: .9; }
        &:focus { border-bottom-color: $accent-soft; }
    }

    &.valid input, &.valid textarea { box-shadow: inset 0 -2px 0 0 rgba($ok, .9); }
    &.invalid input, &.invalid textarea { box-shadow: inset 0 -2px 0 0 rgba($error, .9); }

    textarea { resize: none; min-height: clamp(120px, 18vh, 180px); }
}

.msg {
    //color: lighten($error, 10%);
    color: color.adjust($error, $lightness: 10%);
    font-size: clamp(.86rem, 1.6vw, .92rem);
}

/* Consent */
.consent {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    color: $muted;
    font-size: clamp(13px, 1.7vw, 15px);

    input[type="checkbox"] {
        appearance: none;
        width: 18px !important;
        height: 18px !important;
        border: 2px solid $accent;
        border-radius: 2px;
        position: relative;
        margin-top: 3px;
        cursor: pointer;
        transition: background-color .15s, box-shadow .15s;

        &:checked { background: $accent; }
        &:checked::after {
            content: '';
            position: absolute;
            left: 4px; top: 0px;
            width: 5px; height: 10px;
            border: solid #0b0b0b;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        &:focus { box-shadow: 0 0 0 3px rgba($accent, .25); }
    }

    a { color: $accent; text-decoration: underline; }
}

/* Feedback */
.feedback { min-height: 24px; }
.ok { color: $ok; }
.err { color: $error; }

/* Button */
.pill { border-radius: 999px; }

.submit {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    justify-self: start;
    min-width: 170px;
    height: 46px;
    padding: 0 20px;
    border: 1px solid $primaryColor;
    background: transparent;
    color: $primaryColor;
    font-weight: 700;
    cursor: pointer;
    transition: transform .06s ease, filter .2s ease, background-color .2s ease;

    &:hover { background-color: rgba(255,255,255,.06); filter: brightness(1.03); }
    &:active { transform: translateY(1px); }
    &:disabled { opacity: .5; cursor: not-allowed; }
}

/* Spinner */
.spinner {
    display: inline-block;
    width: 18px; height: 18px;
    border: 3px solid rgba(255,255,255,.35);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin .8s linear infinite;
    vertical-align: -3px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Honeypot */
.hp-wrapper {
    position: absolute;
    left: -9999px;
    width: 1px; height: 1px;
    overflow: hidden;
}

/* <= 768px: Button full-width optional */
@media (max-width: 768px) {
    .submit { width: 100%; min-width: 0; }
}
