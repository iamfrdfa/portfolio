<div class="projectsWrapper">
    <div class="projectsHeading">
        <p class="textAboveBoxGreen">{{ 'projects.kicker' | translate }}</p>
        <h1 class="greenBoxHeadline">{{ 'projects.headline' | translate }}</h1>
        <p>{{ 'projects.lead' | translate }}</p>
    </div>

    <!-- Row 1 -->
    <div class="projectsGrid">
        <div class="leftProjectGrid">
            <div class="projectCard" (click)="openOverlay(0)">
                <div class="projectGridItemLeft">
                    <p class="projectName">{{ projects[0]?.name }}</p>
                    <img src="/img/icons/arrow_outward.svg" alt="arrow_outward" class="outwardArrow"/>
                </div>
                <div class="projectGridItemRight">
                    <ng-container *ngFor="let t of projects[0]?.tech; let last = last">
                        {{ ('projects.tech.' + t) | translate }} <span *ngIf="!last" class="greenPipe">|</span>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="rightProjectGrid thumbnail">
            <img src="/img/thumbnails/join.svg" alt="Join - Kanban Board"/>
        </div>
    </div>

    <!-- Row 2 -->
    <div class="projectsGrid">
        <div class="leftProjectGrid">
            <div class="projectCard" (click)="openOverlay(1)">
                <div class="projectGridItemLeft">
                    <p class="projectName">{{ projects[1]?.name }}</p>
                    <img src="/img/icons/arrow_outward.svg" alt="arrow_outward" class="outwardArrow"/>
                </div>
                <div class="projectGridItemRight">
                    <ng-container *ngFor="let t of projects[1]?.tech; let last = last">
                        {{ ('projects.tech.' + t) | translate }} <span *ngIf="!last" class="greenPipe">|</span>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="rightProjectGrid thumbnail">
            <img src="/img/thumbnails/epl.svg" alt="El Pollo Loco"/>
        </div>
    </div>

    <!-- Row 3 -->
    <div class="projectsGrid">
        <div class="leftProjectGrid">
            <div class="projectCard" (click)="openOverlay(2)">
                <div class="projectGridItemLeft">
                    <p class="projectName">{{ projects[2]?.name }}</p>
                    <img src="/img/icons/arrow_outward.svg" alt="arrow_outward" class="outwardArrow"/>
                </div>
                <div class="projectGridItemRight">
                    <ng-container *ngFor="let t of projects[2]?.tech; let last = last">
                        {{ ('projects.tech.' + t) | translate }} <span *ngIf="!last" class="greenPipe">|</span>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="rightProjectGrid thumbnail">
            <img src="/img/thumbnails/join.svg" alt="Join - Kanban Board"/>
        </div>
    </div>
</div>

<!-- ===================== OVERLAY ===================== -->
<div class="overlayBackdrop" *ngIf="isOpen" (click)="closeOverlay()" aria-hidden="true"></div>

<!-- ===================== OVERLAY ===================== -->
<div class="overlayBackdrop" *ngIf="isOpen" (click)="closeOverlay()" aria-hidden="true"></div>

<section
    class="overlayPanel"
    *ngIf="isOpen && projects[current] as p"
    role="dialog"
    aria-modal="true"
    [attr.aria-label]="p.name"
    (click)="$event.stopPropagation()"
>
    <!-- Header -->
    <header class="overlayHeader">
        <button
            type="button"
            class="iconBtn closeBtn"
            (click)="closeOverlay()"
            [attr.aria-label]="'projects.overlay.closeAria' | translate"
        >
            <span class="icon close"></span>
        </button>
    </header>

    <!-- Content -->
    <div class="overlayContent">
        <div class="overlayLeft">
            <h2 class="overlayIndex">{{ (current + 1) | number: '2.0' }}</h2>
            <h3 class="overlayTitle">{{ p.name }}</h3>

            <h4 class="overlayQuestion">{{ 'projects.overlay.question' | translate }}</h4>
            <p class="overlayDesc">{{ p.descriptionKey | translate }}</p>

            <div class="techRow">
                <ng-container *ngFor="let t of p.tech">
          <span class="techIcon">
            <img [src]="getIcon(t)" [alt]="t + ' icon'" />
            <p class="TechRowTech">&nbsp; {{ ('projects.tech.' + t) | translate }}</p>
          </span>
                </ng-container>
            </div>

            <div class="ctaRow">
                <a
                    class="btn gh"
                    [href]="p.repoUrl || null"
                    target="_blank"
                    rel="noopener"
                    (click)="$event.stopPropagation()"
                >
                    {{ 'projects.overlay.github' | translate }} <span class="arrowOut"></span>
                </a>
                <a
                    class="btn live"
                    [href]="p.liveUrl || null"
                    target="_blank"
                    rel="noopener"
                    (click)="$event.stopPropagation()"
                >
                    {{ 'projects.overlay.live' | translate }} <span class="arrowOut"></span>
                </a>
            </div>
        </div>

        <div class="overlayRight">
            <img [src]="p.image" [alt]="p.name" />
        </div>
    </div>

    <!-- Footer -->
    <footer class="overlayFooter">
        <button
            *ngIf="hasPrev"
            type="button"
            class="prevLink"
            (click)="prev()"
            [attr.aria-label]="'projects.overlay.prev' | translate"
        >
            <span class="icon arrowLeft"></span>
            <span>{{ 'projects.overlay.prev' | translate }}</span>
        </button>

        <button
            *ngIf="hasNext"
            type="button"
            class="nextLink"
            (click)="next()"
            [attr.aria-label]="'projects.overlay.next' | translate"
        >
            <span>{{ 'projects.overlay.next' | translate }}</span>
            <span class="icon arrowRight"></span>
        </button>
    </footer>
</section>

